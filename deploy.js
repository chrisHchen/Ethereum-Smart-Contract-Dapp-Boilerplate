var Web3 = require('web3');

var web3 = new Web3();
web3.setProvider(new web3.providers.HttpProvider("http://localhost:8545"));

web3.personal.unlockAccount("0x173388a10858dbc7cce5f5b111bc7584909005de", "linxi66fan", 30)

var insuranceId = 123456 ;
var mutualinsuranceContract = web3.eth.contract([{"constant":false,"inputs":[{"name":"participantId","type":"uint64"},{"name":"balance","type":"uint64"}],"name":"Join","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"participantId","type":"uint64"}],"name":"Exit","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"participantId","type":"uint64"},{"name":"money","type":"uint64"}],"name":"singleTransfer","outputs":[{"name":"","type":"bool"}],"type":"function"},{"constant":false,"inputs":[{"name":"payeeId","type":"uint64"},{"name":"money","type":"uint64"}],"name":"Transfer","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"participantId","type":"uint64"},{"name":"money","type":"uint64"}],"name":"TopUp","outputs":[],"type":"function"},{"constant":false,"inputs":[{"name":"participantId","type":"uint64"},{"name":"money","type":"uint64"}],"name":"Drawback","outputs":[],"type":"function"},{"inputs":[{"name":"insuranceId","type":"uint64"}],"type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"participantId","type":"uint64"},{"indexed":false,"name":"eventType","type":"uint8"},{"indexed":false,"name":"currentParticipants","type":"uint64"}],"name":"ParticipantEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"participantId","type":"uint64[]"},{"indexed":false,"name":"eventType","type":"uint8"},{"indexed":false,"name":"money","type":"uint64"}],"name":"BalanceEvent","type":"event"}]);
var mutualinsurance = mutualinsuranceContract.new(
   insuranceId,
   {
     from: web3.eth.accounts[0], 
     data: '60606040526040516020806117ec833981016040528080519060200190919050505b80600060006101000a81548167ffffffffffffffff021916908302179055505b5061179c806100506000396000f360606040523615610074576000357c01000000000000000000000000000000000000000000000000000000009004806314338c131461007657806315ba9e70146100975780634afdb262146100af578063512f8f21146100e65780636417811e146101075780638fb6c5171461012857610074565b005b6100956004808035906020019091908035906020019091905050610149565b005b6100ad6004808035906020019091905050610567565b005b6100ce60048080359060200190919080359060200190919050506109b0565b60405180821515815260200191505060405180910390f35b6101056004808035906020019091908035906020019091905050610c14565b005b6101266004808035906020019091908035906020019091905050611131565b005b6101476004808035906020019091908035906020019091905050611466565b005b60406040519081016040528060008152602001600081526020015060206040519081016040528060008152602001506040604051908101604052808481526020016001815260200150915081600160005060008667ffffffffffffffff16815260200190815260200160002060005060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548167ffffffffffffffff02191690830217905550905050600360005060008567ffffffffffffffff16815260200190815260200160002060005080548060010182818154818355818115116102ae576002028160020283600052602060002091820191016102ad919061025c565b808211156102a95760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff021916905560018201600050600090555060020161025c565b5090565b5b5050509190906000526020600020906002020160005b6060604051908101604052808781526020016001815260200142815260200150909190915060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548160ff02191690830217905550604082015181600101600050555050506000600881819054906101000a900467ffffffffffffffff168092919060010191906101000a81548167ffffffffffffffff0219169083021790555050600260005080548060010182818154818355818115116103d95760030160049004816003016004900483600052602060002091820191016103d891906103ba565b808211156103d457600081815060009055506001016103ba565b5090565b5b505050919090600052602060002090600491828204019190066008025b86909190916101000a81548167ffffffffffffffff02191690830217905550507f587cf41ad29b993093d44c832879ef0708688f72d27adcf3f027c0505ab4e72b846001600060089054906101000a900467ffffffffffffffff16604051808467ffffffffffffffff1681526020018360ff1681526020018267ffffffffffffffff168152602001935050505060405180910390a1600160405180591061049a5750595b90808252806020026020018201604052509050838160008151811015610002579060200190602002019067ffffffffffffffff169081815260200150507f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f8160018560405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a15b50505050565b602060405190810160405280600081526020015060006000600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1614156105cf57610002565b6000600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160009054906101000a900467ffffffffffffffff1667ffffffffffffffff1614151561072d57600160405180591061062c5750595b90808252806020026020018201604052509150828260008151811015610002579060200190602002019067ffffffffffffffff169081815260200150507f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f826004600160005060008767ffffffffffffffff16815260200190815260200160002060005060000160009054906101000a900467ffffffffffffffff1660405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a15b600090505b600060089054906101000a900467ffffffffffffffff1667ffffffffffffffff168160ff161015610807578267ffffffffffffffff1660026000508260ff1681548110156100025790600052602060002090600491828204019190066008025b9054906101000a900467ffffffffffffffff1667ffffffffffffffff1614156107f95760026000508160ff1681548110156100025790600052602060002090600491828204019190066008025b6101000a81549067ffffffffffffffff0219169055610807565b5b8080600101915050610732565b600160005060008467ffffffffffffffff16815260200190815260200160002060006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549067ffffffffffffffff02191690555050600360005060008467ffffffffffffffff168152602001908152602001600020600050805460008255600202906000526020600020908101906108f591906108a4565b808211156108f15760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff02191690556001820160005060009055506002016108a4565b5090565b5b506000600881819054906101000a900467ffffffffffffffff16809291906001900391906101000a81548167ffffffffffffffff02191690830217905550507f587cf41ad29b993093d44c832879ef0708688f72d27adcf3f027c0505ab4e72b836002600060089054906101000a900467ffffffffffffffff16604051808467ffffffffffffffff1681526020018360ff1681526020018267ffffffffffffffff168152602001935050505060405180910390a15b505050565b60008167ffffffffffffffff16600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160009054906101000a900467ffffffffffffffff1667ffffffffffffffff161015610a115760009050610c0e565b81600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160008282829054906101000a900467ffffffffffffffff160392506101000a81548167ffffffffffffffff02191690830217905550600160005060008467ffffffffffffffff168152602001908152602001600020600050600001600881819054906101000a900467ffffffffffffffff168092919060010191906101000a81548167ffffffffffffffff0219169083021790555050600360005060008467ffffffffffffffff1681526020019081526020016000206000508054806001018281815481835581811511610b7757600202816002028360005260206000209182019101610b769190610b25565b80821115610b725760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff0219169055600182016000506000905550600201610b25565b5090565b5b5050509190906000526020600020906002020160005b6060604051908101604052808681526020016003815260200142815260200150909190915060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548160ff021916908302179055506040820151816001016000505550505060019050610c0e565b92915050565b602060405190810160405280600081526020015060006000600060206040519081016040528060008152602001506000600160005060008967ffffffffffffffff16815260200190815260200160002060005060000160089054906101000a900467ffffffffffffffff1667ffffffffffffffff161415610c9457610002565b6001600060089054906101000a900467ffffffffffffffff160367ffffffffffffffff16604051805910610cc55750595b90808252806020026020018201604052509450600093505b600060089054906101000a900467ffffffffffffffff1667ffffffffffffffff168460ff161015610db75760026000508460ff1681548110156100025790600052602060002090600491828204019190066008025b9054906101000a900467ffffffffffffffff1692508667ffffffffffffffff168367ffffffffffffffff161415610d6857610daa565b610d7283876109b0565b1515610d7d57610002565b82858560ff168151811015610002579060200190602002019067ffffffffffffffff169081815260200150505b8380600101945050610cdd565b6001600060089054906101000a900467ffffffffffffffff16038602915081600160005060008967ffffffffffffffff16815260200190815260200160002060005060000160008282829054906101000a900467ffffffffffffffff160192506101000a81548167ffffffffffffffff02191690830217905550600160005060008867ffffffffffffffff168152602001908152602001600020600050600001600881819054906101000a900467ffffffffffffffff168092919060010191906101000a81548167ffffffffffffffff0219169083021790555050600360005060008867ffffffffffffffff1681526020019081526020016000206000508054806001018281815481835581811511610f3b57600202816002028360005260206000209182019101610f3a9190610ee9565b80821115610f365760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff0219169055600182016000506000905550600201610ee9565b5090565b5b5050509190906000526020600020906002020160005b6060604051908101604052808681526020016002815260200142815260200150909190915060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548160ff02191690830217905550604082015181600101600050555050506001604051805910610fd85750595b90808252806020026020018201604052509050868160008151811015610002579060200190602002019067ffffffffffffffff169081815260200150507f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f8160028460405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a17f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f8560038860405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a15b50505050505050565b60206040519081016040528060008152602001506000600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160089054906101000a900467ffffffffffffffff1667ffffffffffffffff16141561119757610002565b600160005060008467ffffffffffffffff168152602001908152602001600020600050600001600881819054906101000a900467ffffffffffffffff168092919060010191906101000a81548167ffffffffffffffff021916908302179055505081600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160008282829054906101000a900467ffffffffffffffff160192506101000a81548167ffffffffffffffff02191690830217905550600360005060008467ffffffffffffffff16815260200190815260200160002060005080548060010182818154818355818115116112fd576002028160020283600052602060002091820191016112fc91906112ab565b808211156112f85760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff02191690556001820160005060009055506002016112ab565b5090565b5b5050509190906000526020600020906002020160005b6060604051908101604052808681526020016001815260200142815260200150909190915060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548160ff0219169083021790555060408201518160010160005055505050600160405180591061139a5750595b90808252806020026020018201604052509050828160008151811015610002579060200190602002019067ffffffffffffffff169081815260200150507f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f8160018460405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a15b505050565b60206040519081016040528060008152602001506000600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160089054906101000a900467ffffffffffffffff1667ffffffffffffffff1614156114cc57610002565b600160005060008467ffffffffffffffff168152602001908152602001600020600050600001600881819054906101000a900467ffffffffffffffff16809291906001900391906101000a81548167ffffffffffffffff021916908302179055505081600160005060008567ffffffffffffffff16815260200190815260200160002060005060000160008282829054906101000a900467ffffffffffffffff160392506101000a81548167ffffffffffffffff02191690830217905550600360005060008467ffffffffffffffff16815260200190815260200160002060005080548060010182818154818355818115116116335760020281600202836000526020600020918201910161163291906115e1565b8082111561162e5760006000820160006101000a81549067ffffffffffffffff02191690556000820160086101000a81549060ff02191690556001820160005060009055506002016115e1565b5090565b5b5050509190906000526020600020906002020160005b6060604051908101604052808681526020016004815260200142815260200150909190915060008201518160000160006101000a81548167ffffffffffffffff0219169083021790555060208201518160000160086101000a81548160ff021916908302179055506040820151816001016000505550505060016040518059106116d05750595b90808252806020026020018201604052509050828160008151811015610002579060200190602002019067ffffffffffffffff169081815260200150507f33ccc8cf482f91ae58407005d8f8ee9e716a5017a187df8c770dd8d70899920f8160048460405180806020018460ff1681526020018367ffffffffffffffff1681526020018281038252858181518152602001915080519060200190602002808383829060006004602084601f0104600f02600301f15090500194505050505060405180910390a15b50505056', 
     gas: 4700000
   }, function (e, contract){
    //console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })
